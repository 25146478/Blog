function scroll(){$(window).scroll(function(){var n=$(window).scrollTop();n>100?$("div[class=backtop]").fadeIn():$("div[class=backtop]").fadeOut()});$("div[class=backtop]").click(function(){$("html,body").animate({scrollTop:0},200)})}function loadNavCategories(){var n={url:"/category/get",callback:function(n){if(n.isSuccess){var t=template("categories_tmpl",n);document.getElementById("categories").innerHTML=t}}};_ajax(n)}function doSearch(){$("#search").bind("keypress",function(n){if(n.keyCode=="13"){n.preventDefault();var t=$("#search").val().trim();t.length>0&&(location.href="/search/"+t)}})}function loadHotArticles(){var n={url:"/article/gethot",callback:function(n){if(n.isSuccess){var t=template("hot_articles_tmpl",n);document.getElementById("hot_articles").innerHTML=t}}};_ajax(n)}function loadTopTags(){var n={url:"/tag/gettop?count=10",callback:function(n){if(n.isSuccess){var t=template("top_tags_tmpl",n);document.getElementById("top_tags").innerHTML=t}}};_ajax(n)}function loadFriendLinks(){var n={url:"/friendlink/get",callback:function(n){if(n.isSuccess){var t=template("friendlinks_tmpl",n);document.getElementById("friendlinks").innerHTML=t}}};_ajax(n)}function _ajax(n){$.ajax({type:n.type||"GET",url:n.url,contentType:"application/json; charset=utf-8",async:!0,cache:!1,dataType:"json",data:JSON.stringify(n.data),success:function(t){n.callback(t)},error:function(t){n.callback("Error:"+t)}})}$(function(){loadNavCategories();doSearch();loadHotArticles();loadTopTags();loadFriendLinks();scroll()});